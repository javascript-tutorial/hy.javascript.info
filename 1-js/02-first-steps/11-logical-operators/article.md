# Տրամաբանական օպերատորներ (Logical operators)

JavaScript-ում կան չորս տրամաբանական օպերատորներ՝ `||` (ԿԱՄ), `&&` (ԵՎ), `!` (ՈՉ), `??` (Nullish Coalescing). Այստեղ մենք կծանոթանանք առաջին երեքին։ `??` օպերատորին կարող եք ծանոթանալ հաջորդ հոդվածում։

Չնայած նրանք անվանվում են "տրամաբանական", նրանք կարող են կիրառվել կամայական (տարբերվող տրամաբանական տիպից) տիպի վրա։ Նրանց արդյունքը նույպես կարող է լինել կամայական տիպի։

Եկեք դիտարկենք ավելի մանրամասն։

## || (ԿԱՄ) (OR)

"ԿԱՄ" օպերատորը ներկայացվում է երկու ուղղահայաց գիծ նշանների միջոցով։

```js
result = a || b;
```

Դասական ծրագրավորման մեջ տրամաբանական ԿԱՄ օպերատորը կիրառվում է միայն տրամաբանական արժեքների վրա։ Եթե նրա արգումենտներից մեկը ճշմարիտ `true` է, ապա այն վերադարձնում է `true`, հակառակ դեպքում՝ `false`։

JavaScript֊ում այս օպերատորը ավելի ճկուն և հզոր է։ Բայց սկզում եկեք տեսնենք, թե ինչ է կատարվում տրամաբանական տիպերի հետ։

Կան չորս տրամաբանական կոմբինայիաներ․

```js run
alert( true || true );   // true
alert( false || true );  // true
alert( true || false );  // true
alert( false || false ); // false
```

Ինչպես տեսնում ենք արդյունքը միշտ ճիշտ (`true`) է, բացի այն դեպքից, երբ երկու օպերանդներն էլ սխալ (`false`) են։

Եթե օպերանդը տրամաբանական տիպ չի, ապա այն փոխակերպվում (convert) է տրամաբանական տիպի։

Օրինակ `1`֊ը մշակվում է որպես `true`, `0`֊ն՝ `false`․

```js run
if (1 || 0) { // աշխատում է ինչպես if( true || false )
  alert('Ճշմարիտ է!')
}
```

Շատ հաճախ ԿԱՄ `||` օպերատորը օգտագործվում է `if` պայմանի օպերատորի հետ՝ ստուգելու համար արդյոք ճիշտ (`true`) է տրված պայմաններից _գոնե մեկը_։

Օրինակ․

```js run
let hour = 9;

*!*
if (hour < 10 || hour > 18) {
*/!*
  alert('Գրասենյակը փակ է։');
}
```

Մենք կարող ենք ստուգել ավելի շատ պայմաններ․

```js run
let hour = 12
let isWeekend = true

if (hour < 10 || hour > 18 || isWeekend) {
  alert('Գրասենյակը փակ է։') // քանի որ շաբաթ կամ կիրակի է (weekend)
}
```

## ԿԱՄ "||"֊ը գտնում է առաջին ճշմարիտ արժեքը [#or-finds-the-first-truthy-value]

Վերոնշյալ տրամաբանությունը ստանդարտ է ԿԱՄ֊ի համար։ Հիմա եկեք դիտարկենք JavaScript֊ի "հավելյալ" հատկությունները։

Ընդլայնված ալգորիթմը աշխատում է հետևյալ կերպ։

Տրված են մի քանի ԿԱՄ֊ով կապված արժեքներ․

```js
result = value1 || value2 || value3
```

ԿԱՄ `||` օպերատորը կատարում է հետևյալ քայլերը․

- Հաշվում է օպերանդների արժեքները ձախից աջ։
- Ամեն օպերանդի արժեք փոխակերպում է տրամաբանական տիպի։ Եթե արդյունքը `true` է այն կանգ է առնում և վերադարձնում այդ օպերանդի օրիգինալ արժեքը։
- Եթե բոլոր օպերանդները հաշվվում են, և բոլորի արժեքը `false` է լինում, ապա վերադարձնում է վերջին օպերանդի արժեքը։

Արժեքը վերադարձվում է իր օրիգինալ վիճակում, առանց փոխարկման (conversion)։

Այլ կերպ ասած, ԿԱՄ `||`֊երից կազմված շղթան վերադարձնում է առաջին ճշմարիտ արժեքը, կամ վերջինը, եթե չկան ճշմարիտ արժեքներ։

Օրինակ․

```js run
alert(1 || 0) // 1 (1֊ը ճշմարիտ է)

alert(null || 1) // 1 (1֊ը առաջին ճշմարիտ արժեքն է)
alert(null || 0 || 1) // 1 (առաջին ճշմարիտ արժեքը)

alert(undefined || null || 0) // 0 (քանի որ բոլորը սխալական (falsy) են, վերադարձնում է վերջինը)
```

Սա հնարավորություն է տալիս կիրառել օպերատորը "մաքուր, ստանդարտ, միայն տրամաբանական ԿԱՄ"֊ի շրջանակներից դուրս։

1. **Առաջին ճշմարիտ արժեքի ստացումը փոփոխականների կամ արտահայտությունների ցուցակից։**

    Օրինակ ունենք `firstName`, `lastName` և `nickName` փոփոխականները, բոլորը ըստ ցանկության կարող են ստանալ սխալական կամ `undefined` արժեքներ։

    Եկեք օգտագործենք ԿԱՄ `||`֊ը ընտրելու համար մեկը որը ունի արժեք (ճշմարիտ) և ցույց տանք այն (կամ `"Anonymous"` եթե այդպիսի արժեք չի գտնվել)։

    ```js run
    let firstName = "";
    let lastName = "";
    let nickName = "SuperCoder";

    *!*
    alert( firstName || lastName || nickName || "Anonymous"); // SuperCoder
    */!*
    ```

    Եթե բոլոր փոփոխականները լինեին սխալական, ապա կտեսնեինք `"Anonymous"`։

2. **Կրճատ հաշվարկ (Short-circuit evaluation)։**

    ԿԱՄ `||`֊ի մեկ այլ հատկությունը այսպես կոչված "կրճատ հաշվարկ"֊ի հատկությունն է։

    Դա նշանակում է, որ `||`֊ը կատարում է իր արգումենտների հաշվարկը և փոխակերպումը տրամաբանական տիպի մինչև առաջին ճշմարիտ արժեքին հանդիպելը, ապա այդ արժեքը միանգամից վերադարձվում է, առանց նույնիսկ հաջորդ արգումենտներին նայելու։

<<<<<<< HEAD
    Այս հատկության կարևորությունն ակնհայտ է դառնում, եթե օպերանդը պարզապես արժեք չէ, այլ ինչ֊որ արտահայտություն՝ կողմնակի ազդեցությամբ, օրինակ փոփոխականի վերագրում կամ ֆունկցիայի կանչ։
=======
    The importance of this feature becomes obvious if an operand isn't just a value, but an expression with a side effect, such as a variable assignment or a function call.
>>>>>>> 3c934b5a46a76861255e3a4f29da6fd54ab05c8c

    Ներքևի օրինակում միայն երկրորդ նամակը կերևա էկրանին․

    ```js run no-beautify
    *!*true*/!* || alert("չի երևա");
    *!*false*/!* || alert("կերևա");
    ```

    Առաջին տողում ԿԱՄ `||` օպերատորը անմիջապես դադարեցնում է հաշվարկը հենց հանդիպում է `true` արժեքին, այդ պատճառով `alert`֊ը չի կանչվում։

    Հաճախ ծրագրավորողները օգտագործում են այս հատկությունը այն դեպքում, երբ անհրաժեշտ է կատարել հրամանները (execute commands) այն և միայն այն դեպքում, երբ ձախ կողմի գրված պայմանը սխալական է։

## && (ԵՎ) (AND)

ԵՎ օպերատորը ներկայացվում է երկու ամպերսանդի նշանների միջոցով `&&`։

```js
result = a && b
```

Դասական ծրագրավորման մեջ ԵՎ օպերատորը վերադարձնում է `true`, եթե իր երկու օպերանդների արժեքները ճշմերիտ են, հակառակ դեպքում՝ `false`։

```js run
alert( true && true );   // true
alert( false && true );  // false
alert( true && false );  // false
alert( false && false ); // false
```

Օրինակ `if`֊ի հետ։

```js run
let hour = 12;
let minute = 30;

if (hour == 12 && minute == 30) {
  alert('Ժամը 12։30֊ն է');
}
```

Ինչպես ԿԱՄ֊ի դեպքում, ԵՎ֊ի օպերանդները նույնպես կարող են ունենալ կամայական արժեք․

```js run
if (1 && 0) { // հաշվվում է ինչպես true && false
  alert('չի երևա, որովհետև արժեքը սխալական է');
}
```


## ԵՎ "&&"֊ը գտնում է առաջին սխալական արժեքը

Տրված է մի քանի արժեքներ կապակցված ԵՎ֊ով․

```js
result = value1 && value2 && value3
```

ԵՎ `&&` օպերատորը կատարում է հետևյալ գործողություննեը․

- Հաշվում է օպերանդների արժեքները ձախից աջ։
- Ամեն օպերանդի արժեք փոխակերպում է տրամաբանական տիպի։ Եթե արդյունքը `false` է այն կանգ է առնում և վերադարձնում այդ օպերանդի օրիգինալ արժեքը։
- Եթե բոլոր օպերանդները հաշվվում են, և բոլորի արժեքը `true` է լինում, ապա վերադարձնում է վերջին օպերանդի արժեքը։

Այլ կերպ ասած, ԵՎ֊ը վերադարձնում է առաջին սխալական արժեքը, կամ վերջին արժեքը, եթե ոչ մի սխալական արժեք չի գտնվել։

Վերոնշյալ կանոնները նման են ԿԱՄ֊ին։ Տարբերությունն այն է, որ ԵՎ֊ը վերադարձնում է առաջին _սխալական_ արժեքը, իսկ ԿԱՄ֊ը՝ առաջին _ճշմարիտ_ արժեքը։

Օրինակներ․

```js run
// Եթե առաջին օպերանդը ճշմարիտ է,
// ապա ԵՎ֊ը վերադարձնում է երկրոդ օպերանդը։
alert( 1 && 0 ); // 0
alert( 1 && 5 ); // 5

// Եթե առաջին օպերանդը սխալական է,
// ապա ԵՎ֊ը վերադարձնում է այն։ Երկրորդ օպերանդը անտեսվում է։
alert( null && 5 ); // null
alert( 0 && "կապ չունի ինչ" ); // 0
```

Կարող ենք նաև մի քանի արժեք միաժամանակ փոխանցել։ Տեսնենք թե ինչպես է ԵՎ֊ը վերադարձնում առաջին սխալական արժեքը․

```js run
alert(1 && 2 && null && 3) // null
```

Երբ բոլոր արժեքնորը ճշմարիտ են, ապա վերադարձվում է վերջին արժեքը․

```js run
alert(1 && 2 && 3) // 3, վերջինը
```

````smart header="ԵՎ `&&`֊ի նախապատվությունը (precedence) ավելի բարձր է քան ԿԱՄ `||`֊ինը"
ԵՎ `&&`֊ի նախապատվությունը (precedence) ավելի բարձր է քան ԿԱՄ `||`֊ինը:

Այսպիսով `a && b || c && d` արտահայտությունը համարժեք է հետևյալ արտահայտությանը՝ `(a && b) || (c && d)`, որտեղ `&&`֊երը փակագծերի մեջ են։
````

````warn header="Մի փոխարինեք `if`֊ը `||`֊ով կամ `&&`֊ով"
Հաճախ ծրագրավորողները օգտագործում են ԵՎ `&&` օպերատորը, որպես "`if`֊ի կարճ գրելաձև"։

Օրինակ․

```js run
let x = 1;

(x > 0) && alert('Մեծ է զրոից');
```

Աջ կողմի գործողությունը կկատարվի այն ժամանակ, երբ ձախից աջ արժեքավորումը հասնի իրեն (այսինքն ձախ կողմի բոլոր արժեքները ճշմարիտ են)։ Դա տեղի կունենա, եթե `(x > 0)` արտահայտությունը ճիշտ լինի։

Դա ստացվում է հետևյալի անալոգը․

```js run
let x = 1;

if (x > 0) alert('Մեծ է զրոից');
```

Թեև `&&`֊ով տարբերակն ավելի կարճ է, `if`֊ը ավելի հասկանալի է և ավելի ընթեռնելի։ Այսպիսով, մենք խորհուրդ ենք տալիս օգտագործել յուրաքանչյուր գրելաձև իր նշանակությանը համապատասխան՝ օգտագործեք `if` եթե ցանկանում եք պայման ստուգել, և `&&`, եթե ցանկանում եք կատարել ԵՎ տրամաբանական գործողությունը։
````


## ! (ՈՉ) (NOT)

Տրամաբանական ՈՉ օպերատորը ներկայացվում է բացականչական նշանի միջոցով՝ `!`։

Նրա շարահյուսությունը (syntax) շատ պարզ է․

```js
result = !value
```

Օպերատորը ընդունում է մեկ արգումենտ և կատարում հետևյալ քայլերը․

1. Փոխակերպում է օպերանդը տրամաբանական տիպի՝ `true/false`.
2. Վերադարձնում է հակադարձ արժեքը։

Օրինակ․

```js run
alert( !true ); // false
alert( !0 ); // true
```

Երբեմն կրկնակի ՈՉ `!!`֊ը օգտագործվում է արժեքը տրամաբանական տիպի փոխակերպելու համար․

```js run
alert(!!'ոչ դատարկ տողային արժեք') // true
alert(!!null) // false
```

Այսինքն՝ առաջին ՈՉ֊ը փոխակերպում է արժեքը տրամաբանական տիպի, և վերադարձնում դրա հակադարձը, իսկ երկրորդ ՈՉ֊ը կրկին հակադարձում է այն։ Վերջնարդյունքում ունենում ենք տրամաբանական տիպի փոխակերպում (value-to-boolean conversion)։

Այս գործողության ավելի տեսանելի տարբերակը ներկառուցված `Boolean` ֆունկցիայի կիրառմամբ է․

```js run
alert(Boolean('ոչ դատարկ տողային արժեք')) // true
alert(Boolean(null)) // false
```

ՈՉ `!` օպերատորի նախապատվությունը ամենաբարձրն է բոլոր տրամաբանական օպերատորների մեջ, այսինքն արտահայտության մեջ միշտ առաջինը կատարվում է `!` գործողությունը, և այնուհետև `&&` և `||` գործողությունները։
